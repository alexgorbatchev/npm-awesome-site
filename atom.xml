<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
	<title>npm awesome</title>
	<subtitle>Daily dose of awesome NPM modules for Node.js, old and new!</subtitle>
	<link href="http://npmawesome.com/atom.xml" rel="self" />
	<link href="http://npmawesome.com" />
	<id>http://npmawesome.com</id>
	<updated>2014-04-19T18:53:29.579Z</updated>
	<author>
		<name>Alex Gorbatchev</name>
	</author>

  
  
  
    
    
    
		<entry>
			<title>Links for Apr 19, 2014</title>
			<link href="http://npmawesome.com/posts/2014-04-19-links"/>
			<updated>2014-04-19T17:00:00.000Z</updated>
			<id>http://npmawesome.com/posts/2014-04-19-links</id>
			<content type="html">&lt;p&gt;&lt;img src=&quot;http://npmawesome.com/images/posts/html5.svg&quot; style=&quot;float: right; width: 150px;&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;articles-slides&quot;&gt;Articles &amp;amp; Slides&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://scotch.io/tutorials/javascript/build-a-restful-api-using-node-and-express-4&quot;&gt;Build a RESTful API Using Node and Express 4&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;With the release of Express 4.0 just a few days ago, lots of our Node apps will have some changes in how they handle routing. With the changes in the Express Router, we have more flexibility in how we can define the routes for our applications.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.sitepoint.com/controlling-arduino-nodejs-johnny-five/&quot;&gt;Controlling an Arduino with NodeJS and Johnny-Five&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Firmata and Johnny-Five make it a lot easier for JavaScript developers to get more involved and develop applications that can interact with, respond to and control Arduino powered technology.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://alxhill.com/blog/articles/brunch-coffeescript-angular/&quot;&gt;Brunch - A build system without the Grunt-work&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Brunch compiles, concats and (optionally) minifies your scripts and styles. It can also package JavaScript files into AMDor CommonJS modules. Brunch automatically applies plugins in the correct order to the right files - so with the right plugins, a .coffee file would be converted into a .js file and then minified, with no explicit setup necessary.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=HY4d-0Kzp68&quot;&gt;EmberConf 2014 HTMLBars: The Next-Generation of Templating in Ember.js by Erik Bryn and Kris Selden&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://i1.ytimg.com/vi/HY4d-0Kzp68/maxresdefault.jpg&quot; style=&quot;width: 400px&quot; /&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=2awbKQ2DLRE#t=211&quot;&gt;Pyro Board: 2D Rubens&amp;#39; Tube!&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://i1.ytimg.com/vi/2awbKQ2DLRE/maxresdefault.jpg&quot; style=&quot;width: 400px&quot; /&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.buzzfeed.com/mjs538/completely-surreal-pictures-of-americas-abandoned-malls&quot;&gt;Completely Surreal Photos Of America’s Abandoned Malls&lt;/a&gt; and a &lt;a href=&quot;https://www.youtube.com/watch?v=ZAo2ue6s5Bc&quot;&gt;video&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://s3-ec.buzzfed.com/static/2014-04/enhanced/webdr06/2/10/enhanced-29364-1396450428-10.jpg&quot; style=&quot;width: 400px&quot; /&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.buzzfeed.com/ryanhatesthis/all-hail-the-mighty-pizza-cake&quot;&gt;Pizza Cake&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://s3-ec.buzzfed.com/static/2014-04/enhanced/webdr03/18/12/enhanced-buzz-wide-14629-1397837404-8.jpg&quot; style=&quot;width: 400px&quot; /&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;github&quot;&gt;Github&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/salomvary/soundcleod&quot;&gt;SoundCleod&lt;/a&gt; is a Mac OS X application which brings SoundCloud to the desktop without using a browser.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;twitter&quot;&gt;Twitter&lt;/h2&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; data-partner=&quot;tweetdeck&quot;&gt;&lt;p&gt;A NodeJS Perspective on What’s New in MongoDB 2.6, Part I: Text Search &lt;a href=&quot;http://t.co/RCjrLHd2u0&quot;&gt;http://t.co/RCjrLHd2u0&lt;/a&gt;&lt;/p&gt;&amp;mdash; MongoDB (@MongoDB) &lt;a href=&quot;https://twitter.com/MongoDB/statuses/457562812223852545&quot;&gt;April 19, 2014&lt;/a&gt;&lt;/blockquote&gt;

&lt;blockquote class=&quot;twitter-tweet&quot;&gt;&lt;p&gt;omg shut up and take my money! &lt;a href=&quot;https://t.co/UCVqDsakuJ&quot;&gt;https://t.co/UCVqDsakuJ&lt;/a&gt;&lt;/p&gt;&amp;mdash; Alex Gorbatchev (@alexgorbatchev) &lt;a href=&quot;https://twitter.com/alexgorbatchev/statuses/457219682164940800&quot;&gt;April 18, 2014&lt;/a&gt;&lt;/blockquote&gt;</content>
		</entry>
	
    
    
    
		<entry>
			<title>Links for Apr 18, 2014</title>
			<link href="http://npmawesome.com/posts/2014-04-18-links"/>
			<updated>2014-04-18T17:00:00.000Z</updated>
			<id>http://npmawesome.com/posts/2014-04-18-links</id>
			<content type="html">&lt;p&gt;&lt;img src=&quot;http://npmawesome.com/images/posts/html5.svg&quot; style=&quot;float: right; width: 150px;&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;articles-slides&quot;&gt;Articles &amp;amp; Slides&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://googleresearch.blogspot.co.uk/2014/04/lens-blur-in-new-google-camera-app.html&quot;&gt;Lens Blur in the new Google Camera app&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Having computed the depth map, we can re-render the photo, blurring pixels by differing amounts depending on the pixel’s depth, aperture and location relative to the focal plane. The focal plane determines which pixels to blur, with the amount of blur increasing proportionally with the distance of each pixel to that focal plane. This is all achieved by simulating a physical lens using the thin lens approximation.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.sitepoint.com/controlling-arduino-nodejs-johnny-five/&quot;&gt;Controlling an Arduino with NodeJS and Johnny-Five&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This video aims to help those new to Arduinos and NodeJS understand the basics of getting started. I’ll provide an overview of what you’ll need to do in order to get a Node application speaking to an Arduino using the Johnny-Five JavaScript framework. By the end we will have used the power of JavaScript to turn an LED light on and off!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;read-more&quot;&gt;&lt;/div&gt;

&lt;h2 id=&quot;github&quot;&gt;Github&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://chieffancypants.github.io/angular-hotkeys/&quot;&gt;AngularHotkeys.js&lt;/a&gt; - configuration-centric keyboard shortcuts for your angular apps.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/lukasz-zak/disqus-here&quot;&gt;disqusHere&lt;/a&gt; - Angular directive for embeding Disqus comments on your site.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/flowjs/ng-flow&quot;&gt;Flow.js&lt;/a&gt; is a JavaScript library providing multiple simultaneous, stable and resumable uploads via the HTML5 File API. Library does not require third party dependencies.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/AlexNisnevich/untrusted&quot;&gt;Untrusted —or— the Continuing Adventures of Dr. Eval&lt;/a&gt; is an exciting Meta-Javascript Adventure Game wherein you guide the dashing, steadfast Dr. Eval through a mysterious MACHINE CONTINUUM, wherein, using only his trusty computer and the TURING-COMPLETE power of Javascript, he must literally ALTER HIS REALITY in order to find his freedom! You must literally edit and re-execute the very Javascript running the game in your browser to save Dr. Eval from this dark and confusing reality!&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;unix&quot;&gt;Unix&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;openssl rand -base64 32&lt;/code&gt; to generate a “random” string.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://character-code.com/arrows-html-codes.php&quot;&gt;Arrows HTML Code and Unicode Hexadecimal&lt;/a&gt; ↑↑↓↓←→←→&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;twitter&quot;&gt;Twitter&lt;/h2&gt;
&lt;blockquote class=&quot;twitter-tweet&quot;&gt;&lt;p&gt;Can’t wait until gulp 4 for non-dependent task support? Try run-sequence! &lt;a href=&quot;https://t.co/PPyJnjA4Jz&quot;&gt;https://t.co/PPyJnjA4Jz&lt;/a&gt;&lt;/p&gt;&amp;mdash; gulp (@gulpjs) &lt;a href=&quot;https://twitter.com/gulpjs/statuses/457120895102754816&quot;&gt;April 18, 2014&lt;/a&gt;&lt;/blockquote&gt;</content>
		</entry>
	
    
    
    
		<entry>
			<title>terminal-menu</title>
			<link href="http://npmawesome.com/posts/2014-04-18-terminal-menu"/>
			<updated>2014-04-18T16:52:03.000Z</updated>
			<id>http://npmawesome.com/posts/2014-04-18-terminal-menu</id>
			<content type="html">&lt;p&gt;Lets continue building out awesome CLI (command line interface) tool. Previously we have discussed how to &lt;a href=&quot;/npmawesome-parsing-command-line-options-with-yargs/&quot;&gt;take in command line arguments&lt;/a&gt;, &lt;a href=&quot;/npmawesome-table-formatting-in-the-terminal-with-cli-tables/&quot;&gt;output tabular data&lt;/a&gt; and &lt;a href=&quot;/npmawesome-progress-reporting-in-cli-applications/&quot;&gt;display progress of long running tasks&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;hide-on-mobile&quot; src=&quot;https://avatars2.githubusercontent.com/u/12631?s=400&quot; style=&quot;float: right; margin-left: 1em; width: 100px;&quot;/&gt;
Prompting a user with options and asking to pick one is a fairly common scenario. Most of the time you get to read the options and press associated key. That works, but we are human and like pretty interfaces. Same thing can be achieved with a common menu interface. This is where &lt;a href=&quot;https://github.com/substack/terminal-menu&quot;&gt;terminal-menu&lt;/a&gt; by &lt;a href=&quot;https://github.com/substack&quot;&gt;James Halliday&lt;/a&gt; comes in.&lt;/p&gt;
&lt;div class=&quot;read-more&quot;&gt;&lt;/div&gt;

&lt;pre&gt;&lt;code&gt;npm install terminal-menu
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;features&quot;&gt;Features&lt;/h2&gt;
&lt;p&gt;There are a few options available to customize the menu such as:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Background color&lt;/li&gt;
&lt;li&gt;Foreground color&lt;/li&gt;
&lt;li&gt;Position&lt;/li&gt;
&lt;li&gt;Width&lt;/li&gt;
&lt;li&gt;Padding&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;usage&quot;&gt;Usage&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;var terminalMenu = require(&amp;#39;terminal-menu&amp;#39;);

var menu = terminalMenu({
  width: 60,
  x: 4,
  y: 2
});

menu.reset();
menu.write(&amp;#39;Recently on our blog\n&amp;#39;);
menu.write(&amp;#39;-------------------------\n&amp;#39;);

menu.add(&amp;#39;How to setup a multi-user Ghost blog&amp;#39;);
menu.add(&amp;#39;Patched PaaS Vulnerability&amp;#39;);
menu.add(&amp;#39;npmawesome: Progress reporting in CLI applications&amp;#39;);
menu.add(&amp;#39;Improved SSL experience for private npm&amp;#39;);
menu.add(&amp;#39;npmawesome: Table formatting in the terminal with...&amp;#39;);

menu.on(&amp;#39;select&amp;#39;, function (label, index) {
  menu.close();
  console.log(&amp;#39;You selected:&amp;#39;);
  console.log(index, label);
});

menu.createStream().pipe(process.stdout);
&lt;/code&gt;&lt;/pre&gt;&lt;div style=&quot;padding: 13px 10px 10px; background: black; text-align: center; border-radius: 3px&quot;&gt;&lt;img src=&quot;http://npmawesome.com/images/posts/terminal-menu/terminal-menu01.gif&quot;/&gt;&lt;/div&gt;

&lt;p&gt;Check out interactive example on &lt;a href=&quot;http://runnable.com/U0YDx3Bx9a1ntoDb/terminal-menu-example-for-npm-awesome-nodejitsu-node-js-and-cli&quot;&gt;runnable&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;other-modules-to-checkout&quot;&gt;Other modules to checkout&lt;/h2&gt;
&lt;p&gt;Generally there is a list of alternative modules here, but as strange as it sounds, I couldn&amp;#39;t find any. If you know of one, please drop us a line.&lt;/p&gt;
&lt;h2 id=&quot;closing-thoughts&quot;&gt;Closing thoughts&lt;/h2&gt;
&lt;p&gt;Over the last couple of CLI related posts we&amp;#39;ve progressively been improving user experience of our terminal application. I feel that you can never spend too much time doing this, but you can definetely spend too little. I love little things that feel good. &lt;a href=&quot;https://github.com/substack/terminal-menu&quot;&gt;terminal-menu&lt;/a&gt; was created for &lt;a href=&quot;https://github.com/substack/stream-adventure&quot;&gt;stream-adventure&lt;/a&gt;, an educational terminal based stream adventure game for Node.js and &lt;a href=&quot;https://github.com/substack/stream-adventure&quot;&gt;stream-adventure&lt;/a&gt; in turn inspired &lt;a href=&quot;http://nodestreams.com/&quot;&gt;browser based version&lt;/a&gt; written by John Resig of the jQuery fame. Both are pretty cool and fun!&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; lang=&quot;en&quot;&gt;&lt;p&gt;everybody going to nodeconf should make sure to npm install -g stream-adventure&lt;/p&gt;&amp;mdash; James Halliday (@substack) &lt;a href=&quot;https://twitter.com/substack/statuses/350097531730006017&quot;&gt;June 27, 2013&lt;/a&gt;&lt;/blockquote&gt;

&lt;blockquote class=&quot;twitter-tweet&quot; lang=&quot;en&quot;&gt;&lt;p&gt;&lt;a href=&quot;https://twitter.com/maxogden&quot;&gt;@maxogden&lt;/a&gt; &lt;a href=&quot;https://twitter.com/substack&quot;&gt;@substack&lt;/a&gt; Would love your feedback on &lt;a href=&quot;http://t.co/PX0oG8CtB7&quot;&gt;http://t.co/PX0oG8CtB7&lt;/a&gt; was inspired by stream adventure! More info: &lt;a href=&quot;http://t.co/c1eQGB53Lm&quot;&gt;http://t.co/c1eQGB53Lm&lt;/a&gt;&lt;/p&gt;&amp;mdash; John Resig (@jeresig) &lt;a href=&quot;https://twitter.com/jeresig/statuses/401419183230951424&quot;&gt;November 15, 2013&lt;/a&gt;&lt;/blockquote&gt;

</content>
		</entry>
	
    
    
    
		<entry>
			<title>Links for Apr 17, 2014</title>
			<link href="http://npmawesome.com/posts/2014-04-17-links"/>
			<updated>2014-04-18T03:00:00.000Z</updated>
			<id>http://npmawesome.com/posts/2014-04-17-links</id>
			<content type="html">&lt;h2 id=&quot;articles-slides&quot;&gt;Articles &amp;amp; Slides&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://techcrunch.com/2014/04/14/sf-housing/&quot;&gt;How Burrowing Owls Lead To Vomiting Anarchists (Or SF’s Housing Crisis Explained)&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Homeowners have a strong economic incentive to restrict supply because it supports price appreciation of their own homes.
…
Then the rent-controlled tenants care far more about eviction protections than increasing supply. That’s because their most vulnerable constituents are paying rents that are so far below market-rate, that only an ungodly amount of construction could possibly help them. Plus, that construction wouldn’t happen fast enough — especially for elderly tenants.&lt;/p&gt;
&lt;p&gt;So we’re looking at as much as 80 percent of the city that isn’t naturally oriented to add to the housing stock.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://insights.ubuntu.com/news/ubuntu-14-04-lts-the-cloud-platform-of-choice/&quot;&gt;Ubuntu 14.04 LTS: the cloud platform of choice&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Canonical today announces Ubuntu 14.04 LTS will be released on 17th April 2014, bringing a new level of reliability, performance and interoperability to cloud and scale out environments with support and maintenance for five years.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://blog.indutny.com/9.heartbleed&quot;&gt;Cracking Cloudflare&amp;#39;s heartbleed challenge&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;… it won&amp;#39;t produce any result immediately, it took me 3 hours and a certain amount of luck to obtain the key in a Cloudflare&amp;#39;s challenge.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://theory.stanford.edu/~amitp/GameProgramming/AStarComparison.html&quot;&gt;Introduction to A*&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Movement for a single object seems easy. Pathfinding is complex.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://codecondo.com/10-web-application-frameworks-for-node-js/&quot;&gt;12 Web Application Frameworks for Node.js&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://tails.boum.org/&quot;&gt;Tails&lt;/a&gt; is a live operating system, that you can start on almost any computer from a DVD, USB stick, or SD card. It aims at preserving your privacy and anonymity.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;read-more&quot;&gt;&lt;/div&gt;

&lt;h2 id=&quot;twitter&quot;&gt;Twitter&lt;/h2&gt;
&lt;blockquote class=&quot;twitter-tweet&quot;&gt;&lt;p&gt;Hello. My name is Ethan Welborn, and I am a &lt;a href=&quot;https://twitter.com/gulpjs&quot;&gt;@gulpjs&lt;/a&gt;-aholic. Please contact me if you can provide assistance... or badass tasks. &lt;a href=&quot;https://twitter.com/search?q=%23wtfwow&amp;amp;src=hash&quot;&gt;#wtfwow&lt;/a&gt;&lt;/p&gt;&amp;mdash; Ethan Welborn (@WelbornEthan) &lt;a href=&quot;https://twitter.com/WelbornEthan/statuses/456171513905831937&quot;&gt;April 15, 2014&lt;/a&gt;&lt;/blockquote&gt;

&lt;blockquote class=&quot;twitter-tweet&quot;&gt;&lt;p&gt;Our &lt;a href=&quot;https://twitter.com/gulpjs&quot;&gt;@gulpjs&lt;/a&gt; webapp generator just got another round of updates: &lt;a href=&quot;https://t.co/soUQV3bnNl&quot;&gt;https://t.co/soUQV3bnNl&lt;/a&gt;. &lt;a href=&quot;http://t.co/S1nduFgVGJ&quot;&gt;pic.twitter.com/S1nduFgVGJ&lt;/a&gt; via &lt;a href=&quot;https://twitter.com/yeoman&quot;&gt;@yeoman&lt;/a&gt;&lt;/p&gt;&amp;mdash; Siancore (@siancore) &lt;a href=&quot;https://twitter.com/siancore/statuses/456463584835665920&quot;&gt;April 16, 2014&lt;/a&gt;&lt;/blockquote&gt;

&lt;blockquote class=&quot;twitter-tweet&quot;&gt;&lt;p&gt;Comparing async control flow tools: &lt;a href=&quot;https://twitter.com/search?q=%23nodejs&amp;amp;src=hash&quot;&gt;#nodejs&lt;/a&gt; Promises, Try/Catch and &lt;a href=&quot;https://twitter.com/angularjs&quot;&gt;@angularjs&lt;/a&gt; Zone.js by &lt;a href=&quot;https://twitter.com/alexgorbatchev&quot;&gt;@alexgorbatchev&lt;/a&gt; - &lt;a href=&quot;http://t.co/5BrNEisgH7&quot;&gt;http://t.co/5BrNEisgH7&lt;/a&gt;&lt;/p&gt;&amp;mdash; StrongLoop (@StrongLoop) &lt;a href=&quot;https://twitter.com/StrongLoop/statuses/456453560532606976&quot;&gt;April 16, 2014&lt;/a&gt;&lt;/blockquote&gt;</content>
		</entry>
	
    
    
    
		<entry>
			<title>Comparing Node.js Promises, Try/Catch, Angular Zone.js and yes, Zone</title>
			<link href="http://npmawesome.com/posts/2014-04-16-promises-trycatch-zones"/>
			<updated>2014-04-16T17:01:54.000Z</updated>
			<id>http://npmawesome.com/posts/2014-04-16-promises-trycatch-zones</id>
			<content type="html">&lt;h1 id=&quot;handling-errors-in-async-flow&quot;&gt;Handling errors in async flow&lt;/h1&gt;
&lt;p&gt;In the &lt;a href=&quot;http://strongloop.com/strongblog/node-js-callback-hell-promises-generators/&quot;&gt;previous article&lt;/a&gt; we&amp;#39;ve talked about managing async flow and escaping the &lt;a href=&quot;http://callbackhell.com/&quot;&gt;callback hell&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;the-problem&quot;&gt;The problem&lt;/h2&gt;
&lt;p&gt;Handling errors in asynchronous flow is pretty straightforward and easy. Handling errors in asynchronous flow in a clean and easy to follow manner - not so much.&lt;/p&gt;
&lt;p&gt;Lets look at the following code:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;function updateDependencies(packageName, done) {
  findPackage(packageName, function(err, content) {
    if (err) {
      done(err);
    }
    else {
      try {
        package = JSON.parse(content);
      }
      catch (e) {
        done(e);
      }

      findDependencies(package, function(err, dependencies)) {
        if (err) {
          done(err);
        }
        else {
          processDependencies(dependencies, function(err) {
            if (err) {
              done(err);
            }
            else {
              done(null, dependencies);
            }
          });
        }
      });
    }
  });
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;We are covering all possible failure cases here using combination of &lt;code&gt;try/catch&lt;/code&gt; and callback error handling, but boy do we repeat ourselves over and over again. Lets try and rewrite this!&lt;/p&gt;
&lt;div class=&quot;read-more&quot;&gt;&lt;/div&gt;

&lt;h2 id=&quot;error-handling-using-try-catch&quot;&gt;Error handling using try/catch&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;function updateDependencies(packageName, done) {
  try {
    findPackage(packageName, function(err, content) {
      if (err) throw err;

      findDependencies(JSON.parse(content), function(err, dependencies)) {
        if (err) throw err;

        processDependencies(dependencies, function(err) {
          if (err) throw err;

          done(null, dependencies);
        });
      });
    });
  } catch (e) {
    done(e);
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Nice! That&amp;#39;s much better. However, if we run this now, no errors will be caught. What&amp;#39;s going on here?&lt;/p&gt;
&lt;p&gt;&lt;code&gt;try/catch&lt;/code&gt; idiom works very well when you have fully synchronous code, but asynchronous operations render it useless.&lt;/p&gt;
&lt;p&gt;The outer &lt;code&gt;try/catch&lt;/code&gt; block will never catch anything because &lt;code&gt;findPackage&lt;/code&gt; is asynchronous. The function will begin its course while the outer stack runs through and gets to the last line without any errors.&lt;/p&gt;
&lt;p&gt;If an error occurs at some point in the future inside asynchronous &lt;code&gt;findPackage&lt;/code&gt; - &lt;strong&gt;nothing will be caught&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://npmawesome.com/images/posts/promises-trycatch-zones/catch-fail.gif&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Not useful.&lt;/p&gt;
&lt;h2 id=&quot;error-handling-using-promises&quot;&gt;Error handling using promises&lt;/h2&gt;
&lt;p&gt;In the &lt;a href=&quot;http://strongloop.com/strongblog/node-js-callback-hell-promises-generators/&quot;&gt;previous article&lt;/a&gt; we&amp;#39;ve talked about managing asynchronous flow and escaping the &lt;a href=&quot;http://callbackhell.com/&quot;&gt;callback hell&lt;/a&gt; with promises. Lets put this promises to work here and rewrite this function.&lt;/p&gt;
&lt;p&gt;For the sake of moving forward quicker lets assume we are using &lt;a href=&quot;https://github.com/petkaantonov/bluebird&quot;&gt;Bluebird&lt;/a&gt; promises library and that all our APIs now return promises instead of taking callbacks:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;function updateDependencies(packageName) {
  return findPackage(packageName)
    .then(JSON.parse)
    .then(findDependencies)
    .then(processDependencies)
    .then(res.send)
    ;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Oh wow, that is so much nicer! Right? Right!&lt;/p&gt;
&lt;p&gt;But Alex, &amp;quot;we&amp;#39;ve lost our error handling&amp;quot;, you might say. That&amp;#39;s right, we don&amp;#39;t need to do anything special here to propagate error because we return a promise and there&amp;#39;s built in support for error flow. Lets see how error handling might look like with promises:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;button.addEventListener(&amp;quot;click&amp;quot;, function() {
  updateDependencies(&amp;quot;packageName&amp;quot;)
    .then(function(dependencies) {
      output.innerHTML = dependencies.join(&amp;quot;\n&amp;quot;);
    })
    .catch(function(err) {
      output.innerHTML = &amp;quot;There was an error&amp;quot;;
    });
});
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Very slick, I&amp;#39;m a fan!&lt;/p&gt;
&lt;h2 id=&quot;error-using-zones&quot;&gt;Error using Zones&lt;/h2&gt;
&lt;p&gt;Handling rejected promises works really well when we are in full control of the flow. But what happens if some third-party code throws an error during an asynchronous operation? Lets look at another example:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;function thirdPartyFunction() {
  function fakeXHR() {
    throw new Error(&amp;quot;Invalid dependencies&amp;quot;);
  }

  setTimeout(fakeXHR, 100);
}

function main() {
  button.on(&amp;quot;click&amp;quot;, function onClick() {
    thirdPartyFunction();
  });
}

main();
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;In this case, we wouldn&amp;#39;t have a chance to catch and process the error. Generally, the only recourse here is using half baked &lt;code&gt;window.onerror&lt;/code&gt; that doesn&amp;#39;t give you any stack information at all. At least you can log something, right? Not that there&amp;#39;s much to log:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Uncaught Error: Invalid dependencies
    fakeXHR
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Up until recently that was pretty much all we had. However, this january &lt;a href=&quot;https://github.com/btford&quot;&gt;Brian Ford&lt;/a&gt; of the &lt;a href=&quot;http://angularjs.org&quot;&gt;angular.js&lt;/a&gt; fame has released &lt;a href=&quot;https://github.com/btford/zone.js/&quot;&gt;Zone.js&lt;/a&gt; which aims to help tackle this.&lt;/p&gt;
&lt;p&gt;Basically, &lt;a href=&quot;https://github.com/btford/zone.js/&quot;&gt;Zone.js&lt;/a&gt; &lt;strong&gt;overrides all asynchronous functions in the browser&lt;/strong&gt; with custom implementations which allows it to keep track of the context. Dangerous? Yes! But as we say in Soviet Russia, &amp;quot;he who doesn&amp;#39;t risk never gets to drink champagne&amp;quot; (or in English &amp;quot;nothing ventured, nothing gained&amp;quot;).&lt;/p&gt;
&lt;p&gt;Anyways, lets look at how this works. Assuming you have included &lt;code&gt;zones.js&lt;/code&gt; and &lt;code&gt;long-stack-trace-zone.js&lt;/code&gt; as per the docs, we just change &lt;code&gt;main()&lt;/code&gt; call to:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;zone.fork(Zone.longStackTraceZone).run(main);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Refresh, click the button, and now our stack looks like this:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Error: Invalid dependencies
    at fakeXHR (script.js:7:11)
    at Zone.run (zones.js:41:19)
    at zoneBoundFn (zones.js:27:19)
--- Tue Mar 25 2014 21:20:32 GMT-0700 (PDT) - 106ms ago
Error
    at Function.getStacktraceWithUncaughtError (long-stack-trace-zone.js:24:32)
    at Zone.longStackTraceZone.fork (long-stack-trace-zone.js:70:43)
    at Zone.bind (zones.js:25:21)
    at zone.(anonymous function) (zones.js:61:27)
    at marker (zones.js:66:25)
    at thirdPartyFunction (script.js:10:3)
    at HTMLButtonElement.onClick (script.js:15:5)
    at HTMLButtonElement.x.event.dispatch (jquery.js:5:10006)
    at HTMLButtonElement.y.handle (jquery.js:5:6789)
    at Zone.run (zones.js:41:19)
--- Tue Mar 25 2014 21:20:32 GMT-0700 (PDT) - 1064ms ago
Error
    at getStacktraceWithUncaughtError (long-stack-trace-zone.js:24:32)
    at Function.Zone.getStacktrace (long-stack-trace-zone.js:37:15)
    at Zone.longStackTraceZone.fork (long-stack-trace-zone.js:70:43)
    at Zone.bind (zones.js:25:21)
    at HTMLButtonElement.obj.addEventListener (zones.js:132:37)
    at Object.x.event.add (jquery.js:5:7262)
    at HTMLButtonElement.&amp;lt;anonymous&amp;gt; (jquery.js:5:14336)
    at Function.x.extend.each (jquery.js:4:4575)
    at x.fn.x.each (jquery.js:4:1626)
    at x.fn.extend.on (jquery.js:5:14312)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;What the what?? Cool! We can now see that the relevant code path started in our &lt;code&gt;onClick&lt;/code&gt; method and went into &lt;code&gt;thirdPartyFunction&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The cool part is, since &lt;a href=&quot;https://github.com/btford/zone.js/&quot;&gt;Zone.js&lt;/a&gt; overrides browser methods, it doesn&amp;#39;t matter what libraries you use. It just works.&lt;/p&gt;
&lt;h2 id=&quot;another-async-flow-control-project-called-zones-&quot;&gt;Another async flow control project called Zones?&lt;/h2&gt;
&lt;p&gt;Yep, StrongLoop’s &lt;a href=&quot;https://github.com/piscisaureus&quot;&gt;Bert Belder&lt;/a&gt; has been working on a similar idea called “&lt;a href=&quot;https://www.npmjs.org/package/zone&quot;&gt;Zone&lt;/a&gt;“ for a few months now. (Not to be confused with the Angular &lt;a href=&quot;https://github.com/btford/zone.js/&quot;&gt;Zone.js&lt;/a&gt; project we&amp;#39;ve just been discussing, which shares the same name and some technical characteristics. Yeah, it’s a little confusing, but we are actively working with &lt;a href=&quot;https://github.com/btford&quot;&gt;Brian Ford&lt;/a&gt; on how to potentially bring together these two projects for the mutual benefit of the JavaScript and Node communities. Stay tuned!)&lt;/p&gt;
&lt;h2 id=&quot;why-a-node-specific-zones-project-&quot;&gt;Why a Node-specific Zones project?&lt;/h2&gt;
&lt;p&gt;Currently, there are a couple of problems that make it really hard to deal with asynchronous control flow in Node that Zones looks to address. Specifically:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Stack traces are useless when an asynchronous function fails.&lt;/li&gt;
&lt;li&gt;Asynchronous functions are hard to compose into more high-level APIs. Imagine implementing a simple asynchronous API like bar(arg1, arg2, cb) where cb is the error-first callback that the user of the API specifies. To implement this correctly you must take care:&lt;ul&gt;
&lt;li&gt;to always call the callback&lt;/li&gt;
&lt;li&gt;don’t call the callback more than once&lt;/li&gt;
&lt;li&gt;don’t synchronously throw and also call the callback&lt;/li&gt;
&lt;li&gt;don’t call the callback synchronously&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;It is difficult to handle errors that are raised asynchronously. Typically node will crash. If the uses chooses to ignore the error, resources may leak. Zones should make it easy to handle errors and to avoid resource leaks.&lt;/li&gt;
&lt;li&gt;Sometimes there is a need to associate user data to an asynchronous flow. There is currently no way to do this.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Want to learn more about Zones? Stay tuned for more information in the coming weeks. Follow us on &lt;a href=&quot;https://twitter.com/StrongLoop&quot;&gt;Twitter&lt;/a&gt; or subscribe to our &lt;a href=&quot;http://strongloop.com/newsletter-registration/&quot;&gt;newsletter&lt;/a&gt; to make sure you don’t miss the announcements.&lt;/p&gt;
&lt;h2 id=&quot;what-s-next-&quot;&gt;What&amp;#39;s next?&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Watch &lt;a href=&quot;http://www.youtube.com/watch?v=3IqtmUscE_U&quot;&gt;Brian&amp;#39;s presentation&lt;/a&gt; from ngconf 2014, it&amp;#39;s pretty cool!&lt;/li&gt;
&lt;li&gt;Add &lt;a href=&quot;https://github.com/btford/zone.js/&quot;&gt;Zone.js&lt;/a&gt; to your application.&lt;/li&gt;
&lt;li&gt;Profit!&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;http://npmawesome.com/images/posts/promises-trycatch-zones/party.gif&quot;/&gt;&lt;/p&gt;
</content>
		</entry>
	
</feed>
