<!DOCTYPE html><head><link rel="alternate" title="RSS" type="application/rss+xml" href="http://feeds.feedburner.com/npmawesome"><link rel="stylesheet" type="text/css" media="all" href="/styles.css"><meta name="viewport" content="initial-scale=1, maximum-scale=1"><meta property="twitter:account_id" content="4503599628039784"><meta charset="utf-8"><title>npm awesome</title><meta property="og:image" content="http://npmawesome.com/images/posts/npm.png"><meta property="og:updated_time" content="1391535711000"><meta property="og:site_name" content="npm awesome"><meta property="og:type" content="blog"><meta property="og:url" content="http://npmawesome.com/index.2"><meta name="description" content="Daily dose of awesome NPM modules for Node.js, old and new!"><meta property="og:description" content="Daily dose of awesome NPM modules for Node.js, old and new!"></head><body><div class="container"><div class="row"><h1 id="logo"><a href="/"><span>npm awesome</span><span class="posts-counter">47</span></a></h1><div id="sub-title"><a href="http://npmjs.org">npm</a> picks, old and new.
<a href="https://github.com/alexgorbatchev/npm-awesome-site">Fork on GitHub to contribute</a></div></div><div class="row"><div class="main col"><article><header><h2><a href="/posts/2013-11-19-json-mask">json-mask</a></h2><div class="meta"><span>posted by <a href="https://github.com/alexgorbatchev">Alex Gorbatchev</a> on November 19th 2013</span><a href="http://npmawesome.com/posts/2013-11-19-json-mask#disqus_thread" class="comments"></a><div data-github-repo="nemtsov/json-mask" class="github-stars"></div></div></header><div><p><a href="https://github.com/nemtsov/json-mask">json-mask</a> is a tiny language and
an engine for selecting specific parts of a JavaScript object.</p>
<pre><code>npm install json-mask</code></pre>
<p>The use is very straightforward:</p>
<pre><code>&gt; var mask = require(&#39;json-mask&#39;)
&gt; mask({p: {a: 1, b: 2}, z: 1}, &#39;p/a,z&#39;)
{p: {a: 1}, z: 1}</code></pre>
<p><img class="hide-on-mobile" src="/images/posts/json-mask.png" style="width: 200px; float: right"/></p>
<p>The main difference between JSONPath / JSONSelect and this engine is
that JSON Mask preserves the structure of the original input object.
Instead of returning an array of selected sub-elements (e.g.
<code>[{a: 1}, {z: 1}]</code> from example above), it filters-out the parts of the
object that you don’t need, keeping the structure unchanged:
<code>{p: {a: 1}, z: 1}</code>.</p>
<p>This is important because JSON Mask was designed with HTTP resources in
mind, the structure of which I didn’t want to change after the unwanted
fields were masked / filtered.</p>
<h2 id="syntax">Syntax</h2>
<p>The syntax is loosely based on XPath:</p>
<ul>
<li><code>a,b,c</code> comma-separated list will select multiple fields</li>
<li><code>a/b/c</code> path will select a field from its parent</li>
<li><code>a(b,c)</code> sub-selection will select many fields from a parent</li>
<li><code>a/*/c</code> the star <code>*</code> wildcard will select all items in a field</li>
</ul>
<p>There are plenty of examples and information on the <a href="https://github.com/nemtsov/json-mask">github page</a>.</p>
</div></article><article><header><h2><a href="/posts/2013-11-18-pm2">pm2</a></h2><div class="meta"><span>posted by <a href="https://github.com/alexgorbatchev">Alex Gorbatchev</a> on November 18th 2013</span><a href="http://npmawesome.com/posts/2013-11-18-pm2#disqus_thread" class="comments"></a><div data-github-repo="Unitech/pm2" class="github-stars"></div></div></header><div><p><a href="https://github.com/Unitech/pm2">pm2</a> is a process manager for Node apps with a builtin load-balancer.</p>
<pre><code>npm install pm2</code></pre>
<p><img class="hide-on-mobile" src="/images/posts/pm2.png" style="width: 200px; float: right"/></p>
<p>pm2 is perfect when you need to spread your stateless code accross all
CPUs available on a server, to keep all processes alive forever and to
0s reload it. Good fit for IaaS structures. Don’t use it on PaaS
solutions (a solution for PaaS will be developed later).</p>
<h2 id="main-features">Main features</h2>
<ul>
<li>Builtin load-balancer (using the node cluster module)</li>
<li>Script daemonization</li>
<li>0s downtime reload</li>
<li>Startup scripts for Ubuntu and CentOS</li>
<li>Stop unstable process (avoid infinite loop)</li>
<li>Monitoring in console</li>
<li>HTTP API</li>
<li><a href="https://github.com/Unitech/pm2-interface">Remote control and real time interface API</a></li>
</ul>
<h2 id="more-details">More Details</h2>
<ul>
<li><a href="https://raw.github.com/Unitech/pm2#a2">Usage/Features</a></li>
<li><a href="https://raw.github.com/Unitech/pm2#a3">Different ways to launch a process</a></li>
<li><a href="https://raw.github.com/Unitech/pm2#a16">0s downtime reload</a></li>
<li><a href="https://raw.github.com/Unitech/pm2#a19">CoffeeScript</a></li>
<li><a href="https://raw.github.com/Unitech/pm2#a4">Is my production server ready for PM2</a></li>
<li><a href="https://raw.github.com/Unitech/pm2#a6">Listing processes : pm2 list</a></li>
<li><a href="https://raw.github.com/Unitech/pm2#a7">Monitoring processes (CPU/RAM) : pm2 monit</a></li>
<li><a href="https://raw.github.com/Unitech/pm2#a8">Startup script generation : pm2 startup</a></li>
<li><a href="https://raw.github.com/Unitech/pm2#a9">Log aggregation : pm2 logs</a></li>
<li><a href="https://raw.github.com/Unitech/pm2#a23">Fork mode</a></li>
<li><a href="https://raw.github.com/Unitech/pm2#a24">Customization</a></li>
<li><a href="https://raw.github.com/Unitech/pm2#a12">API health end point : pm2 web</a></li>
<li><a href="https://raw.github.com/Unitech/pm2#a13">JSON processes declaration</a></li>
<li><a href="https://raw.github.com/Unitech/pm2#a27">Contributing/Development mode</a></li>
<li><a href="https://raw.github.com/Unitech/pm2#a21">Known bugs</a></li>
<li><a href="https://raw.github.com/Unitech/pm2#a4">Launching the tests</a></li>
</ul>
<p>There are plenty of examples and information on the <a href="https://github.com/Unitech/pm2">github page</a>.</p>
</div></article><article><header><h2><a href="/posts/2013-11-18-npmd">npmd</a></h2><div class="meta"><span>posted by <a href="https://github.com/alexgorbatchev">Alex Gorbatchev</a> on November 18th 2013</span><a href="http://npmawesome.com/posts/2013-11-18-npmd#disqus_thread" class="comments"></a><div data-github-repo="dominictarr/npmd" class="github-stars"></div></div></header><div><p><a href="https://github.com/dominictarr/npmd">npmd</a> is an alternative npm
client, based around a local replication of the npm metadata
(package.json &amp; readmes are replicated for every package, but only
tarballs that you have installed are replicated). Replicating data
locally makes the client much smarter, and enables all manner of Mad
Science.</p>
<pre><code>npm install npmd</code></pre>
<p>To begin, replicate the registry metadata. When this gets near 100% you
can use the other commands.</p>
<pre><code>npmd --sync</code></pre>
<p>You should leave the npmd service running in the background, this will
make running other npmd commands much faster. npmd will pull down npm
metadata, and store it in a leveldb. This will be less than 200mb,
including a full text index.</p>
<p>To publish a module locally from the package directory, just do:</p>
<pre><code>npmd publish</code></pre>
<p>and your package version will be stashed into a queue for local use. You
can npmd install yourpkg locally even if yourpkg isn’t on the public npm
yet. You can even have multiple versions of your package queued up
locally.</p>
<p>There are plenty of examples and information on the <a href="https://github.com/dominictarr/npmd">github
page</a>.</p>
</div></article><article><header><h2><a href="/posts/2013-11-18-nixt">nixt</a></h2><div class="meta"><span>posted by <a href="https://github.com/alexgorbatchev">Alex Gorbatchev</a> on November 18th 2013</span><a href="http://npmawesome.com/posts/2013-11-18-nixt#disqus_thread" class="comments"></a><div data-github-repo="vesln/nixt" class="github-stars"></div></div></header><div><p><img class="hide-on-mobile" src="/images/posts/nixt.jpg" style="width: 200px; float: right"/></p>
<p><a href="https://github.com/vesln/nixt">nixt</a> is aiming to make testing of
command-line apps as simple as possible. It plays nice with the testing
tools that you are already using and in case you are one of those guys
who practice outside-in BDD, it has the potential to become something
that lives in every command-line app that you are going to build.</p>
<pre><code>npm install nixt</code></pre>
<p>The use is very straightforward:</p>
<pre><code>describe(&#39;todo add&#39;, function() {
  it(&#39;adds a new todo item&#39;, function(done) {
    nixt()
      .run(&#39;todo add&#39;)
      .stdout(&#39;A new todo has been added&#39;)
      .end(done);
  });
});</code></pre>
<p>There are plenty of examples and information on the <a href="https://github.com/vesln/nixt">github
page</a>.</p>
</div></article><article><header><h2><a href="/posts/2013-11-17-vm-js">vm.js</a></h2><div class="meta"><span>posted by <a href="https://github.com/alexgorbatchev">Alex Gorbatchev</a> on November 17th 2013</span><a href="http://npmawesome.com/posts/2013-11-17-vm-js#disqus_thread" class="comments"></a><div data-github-repo="tarruda/vm.js" class="github-stars"></div></div></header><div><p><a href="https://github.com/tarruda/vm.js">vm.js</a> is a pretty impressive fully
functional ECMAScript virtual machine that can be used from any
ECMAScript3-compatible environment. Eventually it will provide a
complete ECMAScript 6 environment (for now only some features are
supported).</p>
<pre><code>npm install vm.js</code></pre>
<p>It’s written in CoffeeScript and has plenty of tests. The most
impressive thing is that the tests themselves run inside <code>vm.js</code>.</p>
<p>Here are some possible use cases:</p>
<ul>
<li>Simple in-process javascript sandbox</li>
<li>Async-to-sync API adapter using fibers (lightweight in-process threads, not node.js fibers)</li>
<li>Use new ECMAScript features in very old browsers</li>
</ul>
<p>The main API can be accessed through vm instances. Each vm is indirectly
associated with a global object (through a “realm”) and is isolated from
other vms.</p>
<p>Start by creating a new instance:</p>
<pre><code>&gt; Vm = require(&#39;vm.js&#39;)
&gt; vm = new Vm()</code></pre>
<p>Evaluate simple expressions:</p>
<pre><code>&gt; vm.eval(&#39;40 + 2&#39;)
42
&gt; vm.eval(&#39;[a, b, c] = [1, 2, 3]&#39;) // Harmony destructuring assignment
[1, 2, 3]
&gt; vm.realm.global.a
1
&gt; vm.realm.global.b
2
&gt; vm.realm.global.c
3</code></pre>
<p>Compile programs and run later</p>
<pre><code>// pass filename as second argument for stack traces/debugging
&gt; script = Vm.compile(&#39;2 + 2&#39;, &#39;sum.js&#39;)
&gt; vm.run(script)
4</code></pre>
<p>Compiled scripts can be serialized/deserialized to/from JSON-friendly
structures:</p>
<pre><code>&gt; scriptObj = script.toJSON()
&gt; serializedScript = JSON.stringify(scriptObj)
&gt; deserializedScript = Vm.fromJSON(JSON.parse(serializedScript))
&gt; vm.run(deserializedScript)</code></pre>
<p>Expose objects to be used by code running inside the Vm</p>
<pre><code>&gt; vm.realm.global.factorial = function factorial(n) { return n &gt; 1 ? factorial(n - 1) * n : 1 }
&gt; vm.eval(&#39;factorial(5)&#39;)
120</code></pre>
<p>The inverse also works:</p>
<pre><code>&gt; vm.eval(&#39;function factorial(n) { return n &gt; 1 ? factorial(n - 1) * n : 1 }&#39;)
&gt; vm.realm.global.factorial(5)
120</code></pre>
<p>Return values asynchronously using fiber pause/resume:</p>
<pre><code>// created a paused fiber from compiled code
fiber = vm.createFiber(Vm.compile(&#39;user = null; user = fetchAsync(&quot;/users/1&quot;);&#39;))
vm.realm.global.fetchAsync = function(url) {
  fiber.pause() // pause execution
  $.get(url, function(data) {
    // user === null
    fiber.setReturnValue(data)
    fiber.resume()
    // user === data
  });
}
// start fiber
fiber.run()</code></pre>
<p>There are plenty of examples on the <a href="https://github.com/tarruda/vm.js">github page</a>.</p>
</div></article><article><header><h2><a href="/posts/2013-11-17-node-jvm">node-jvm</a></h2><div class="meta"><span>posted by <a href="https://github.com/alexgorbatchev">Alex Gorbatchev</a> on November 17th 2013</span><a href="http://npmawesome.com/posts/2013-11-17-node-jvm#disqus_thread" class="comments"></a><div data-github-repo="YaroslavGaponov/node-jvm" class="github-stars"></div></div></header><div><p><a href="https://github.com/YaroslavGaponov/node-jvm">node-jvm</a> is a complete
JVM virtual machine written in JavaScript written by Yaroslav Gaponov
during his preparation for a Java SE 7 exam.</p>
<pre><code>npm install node-jvm</code></pre>
<p>In Java land:</p>
<pre><code>public class Main {
    public static long fib(int n) {
        if (n &lt;= 1) return n;
        return fib(n-1) + fib(n-2);
    }

    public static void main(String[] args) {
        if (args.length == 0) {
            System.out.print(&quot;help: java Main.class {Number}&quot;);
            return;
        }

        int N = Integer.parseInt(args[0]);
        long start = System.currentTimeMillis();
        System.out.format(&quot;Fibonacci from 1 to %s:\n&quot;, N);

        for (int i = 1; i &lt;= N; i++) {
            System.out.println(i + &quot;: &quot; + fib(i));
        }

        long stop = System.currentTimeMillis();
        System.out.println(&quot;time: &quot; + (stop - start) + &quot;ms&quot;);

        System.out.println(&quot;done.&quot;);
    }
}</code></pre>
<p>In JavaScript land:</p>
<pre><code>var JVM = require(&quot;node-jvm&quot;);
var jvm = new JVM();

jvm.setLogLevel(7);
var entryPointClassName = jvm.loadJarFile(&quot;./Main.jar&quot;);

jvm.setEntryPointClassName(entryPointClassName);

jvm.on(&quot;exit&quot;, function(code) {
    process.exit(code);
});

jvm.run([15]);</code></pre>
<p>There are plenty of examples on the <a href="https://github.com/YaroslavGaponov/node-jvm">github page</a>.</p>
</div></article><article><header><h2><a href="/posts/2013-11-17-flake">flake</a></h2><div class="meta"><span>posted by <a href="https://github.com/alexgorbatchev">Alex Gorbatchev</a> on November 17th 2013</span><a href="http://npmawesome.com/posts/2013-11-17-flake#disqus_thread" class="comments"></a><div data-github-repo="chilts/flake" class="github-stars"></div></div></header><div><p><a href="https://github.com/chilts/flake">flake</a> can generate practically unique
approximately sortable IDs in a distributed environment, similiar to
Twitter’s <a href="https://github.com/twitter/snowflake">Snowflake</a>.</p>
<pre><code>npm install flake</code></pre>
<p>Use in distributed environments where you don’t have a central service
which can be a single point of failure - perfect when you want
everything to be redundant and independent of each other. Flake Id is
made up of <code>timestamp-counter-pid-macaddress</code></p>
<pre><code>&gt; var flake = require(&#39;flake&#39;)(&#39;eth0&#39;);
&gt; console.log(flake());
013b829b1520-0000-18f0-984be1b8b104
&gt; console.log(flake());
013b829b1527-0000-18f0-984be1b8b104
&gt; console.log(flake());
013b829b1527-0001-18f0-984be1b8b104</code></pre>
<p>In the example above, <code>eth0</code> is used for machine’s network interface,
but this is not guaranteed to work on your machine. You need to change
it to something which exists on your machine. It’s easy to find it on
your machine using <code>ifconfig</code> or something similiar.</p>
<p>There are plenty of examples and information on the <a href="https://github.com/chilts/flake">github
page</a>.</p>
</div></article><footer class="pagination"><ul><li><a href="/index.1">Prev</a></li><li><a href="/">1</a></li><li><a href="/index.1">2</a></li><li class="active"><span>3</span></li><li class="disabled"><span>Next</span></li></ul></footer><script type="text/javascript">/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'npmawesome'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
  var s = document.createElement('script'); s.async = true;
  s.type = 'text/javascript';
  s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());</script></div><aside class="col"><div class="feedburner"><a href="http://feeds.feedburner.com/npmawesome"><img src="/images/feed.gif"></a></div><div class="other-posts"><h4>Previously...</h4><div><a href="/posts/2014-02-04-binary-js">binary.js</a></div><div><a href="/posts/2014-02-03-power-assert">power-assert</a></div><div><a href="/posts/2014-01-31-coupon-code">coupon-code</a></div><div><a href="/posts/2014-01-30-rewire">rewire</a></div><div><a href="/posts/2014-01-29-yarm">yarm</a></div><div><a href="/posts/2014-01-28-modella">modella</a></div><div><a href="/posts/2014-01-27-mversion">mversion</a></div><div><a href="/posts/2014-01-24-schema-inspector">schema-inspector</a></div><div><a href="/posts/2014-01-23-oboe-js">oboe.js</a></div><div><a href="/posts/2014-01-22-autoprefixer">autoprefixer</a></div><div><a href="/posts/2014-01-21-js-yaml">js-yaml</a></div><div><a href="/posts/2014-01-17-gaze">gaze</a></div><div><a href="/posts/2014-01-14-shortid">shortId</a></div><div><a href="/posts/2014-01-13-testium">testium</a></div><div><a href="/posts/2014-01-10-messageformat">messageformat.js</a></div><div><a href="/posts/2014-01-09-gulp">gulp</a></div><div><a href="/posts/2014-01-06-chalk">chalk</a></div><div><a href="/posts/2013-12-31-recluster">recluster</a></div><div><a href="/posts/2013-12-30-rework">rework</a></div><div><a href="/posts/2013-12-27-cheerio">cheerio</a></div><div><a href="/posts/2013-12-19-dat">dat</a></div><div><a href="/posts/2013-12-18-xregexp">xregexp</a></div><div><a href="/posts/2013-12-16-ect">ect</a></div><div><a href="/posts/2013-12-13-chrono">chrono</a></div><div><a href="/posts/2013-12-11-prettyjson">prettyjson</a></div><div><a href="/posts/2013-12-10-state">state</a></div><div><a href="/posts/2013-12-09-blessed">blessed</a></div><div><a href="/posts/2013-12-05-gm">gm</a></div><div><a href="/posts/2013-12-03-nak">nak</a></div><div><a href="/posts/2013-12-03-verymodel">VeryModel</a></div><div><a href="/posts/2013-11-26-rx-js">rx.js</a></div><div><a href="/posts/2013-11-26-docpad">docpad</a></div><div><a href="/posts/2013-11-25-grunt-angular-builder">grunt-angular-builder</a></div><div><a href="/posts/2013-11-22-event-stream">event-stream</a></div><div><a href="/posts/2013-11-21-bacon-js">bacon.js</a></div><div><a href="/posts/2013-11-20-spdy">node-spdy</a></div><div><a href="/posts/2013-11-19-json-mask">json-mask</a></div><div><a href="/posts/2013-11-18-pm2">pm2</a></div><div><a href="/posts/2013-11-18-npmd">npmd</a></div><div><a href="/posts/2013-11-18-nixt">nixt</a></div><div><a href="/posts/2013-11-17-vm-js">vm.js</a></div><div><a href="/posts/2013-11-17-node-jvm">node-jvm</a></div><div><a href="/posts/2013-11-17-flake">flake</a></div></div></aside></div></div><a id="fork-me" href="https://github.com/alexgorbatchev/npm-awesome-site" class="hide-on-mobile">Fork Me</a></body><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

// http://drawingablank.me/blog/fix-your-bounce-rate.html
// https://news.ycombinator.com/item?id=5766883
setTimeout(function() {
  window.onscroll = function() {
    window.onscroll = null; // Only track the event once
    ga('send', 'scroll', 'read');
  }
}, 5000);

ga('create', 'UA-46164085-1', 'npmawesome.com');
ga('send', 'pageview');
</script><script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><script src="/scripts/npmawesome.bundle.js"></script>