<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#" xmlns:fb="https://www.facebook.com/2008/fbml"><head><meta charset="utf-8"><link rel="alternate" title="RSS" type="application/rss+xml" href="http://feeds.feedburner.com/npmawesome"><link href="http://npmawesome.com/atom.xml" title="Blog Posts" type="application/atom+xml" rel="alternate"><link rel="stylesheet" type="text/css" media="all" href="/styles.css"><meta name="viewport" content="initial-scale=1, maximum-scale=1"><meta property="twitter:account_id" content="4503599628039784"><meta property="fb:app_id" content="1425631694354948"><title>yargs</title><meta property="og:title" content="npm awesome"><meta property="og:image" content="http://npmawesome.com/images/posts/npmawesome-logo-512x512.png"><meta property="og:updated_time" content="1395426357000"><meta property="og:site_name" content="npm awesome"><meta property="og:type" content="article"><meta property="og:url" content="http://npmawesome.com/posts/2014-03-21-yargs"><meta property="og:description" content="Easy command line argument parsing with yargs."><link rel="canonical" href="http://npmawesome.com/posts/2014-03-21-yargs"><meta name="description" content="Easy command line argument parsing with yargs."></head></html><body><header id="page-header"><div class="container"><div class="row"><h1 id="logo"><a href="/"><span class="name">npmawesome</span><span class="posts-counter">101</span></a></h1><div id="sub-title"><a href="http://npmjs.org">npm</a> picks, old and new.
<a href="https://github.com/alexgorbatchev/npm-awesome-site">Fork on GitHub to contribute</a></div></div></div></header><div class="container"><div class="row"><div class="main col"><article><header><h2 class="npm"><a href="/posts/2014-03-21-yargs">yargs</a></h2><div class="meta"><span>posted by <a href="https://github.com/alexgorbatchev">Alex Gorbatchev</a> on March 21st 2014</span><a href="http://npmawesome.com/posts/2014-03-21-yargs#disqus_thread" class="comments"></a><div data-github-repo="chevex/yargs" class="github-stars"></div></div><div class="social-box"><div data-yashareLink="http://npmawesome.com/posts/2014-03-21-yargs" data-yashareL10n="en" data-yashareQuickServices="facebook,twitter,gplus" data-yashareTheme="counter" data-yasharetype-off="small" class="yashare-auto-init"></div></div></header><div class="content"><div class="highlight nodejitsu"><img src="/images/posts/nodejitsu.png" style="height: 80px" class="hide-on-mobile"/><span>This post was written for <a href="http://nodejitsu.com">Nodejitsu</a> blog and is crossposted here.
<a href="http://nodejitsu.com">Nodejitsu</a> loved what I was doing at <a href="http://npmawesome.com">npmawesome.com</a>
and is now supporting the project.</span></div><p><img class="hide-on-mobile" src="https://avatars3.githubusercontent.com/u/874394" width="150" align="right" hspace="10"/>
This post kicks off a small mini-series of posts about modules which making writing CLI (command line interface) tools in Node.js easier. Typically, when starting a new CLI tool, the first problem that you would encounter is how to read arguments that users pass via command line. Standard library gives us <code>process.argv</code> but if you want something a little bit more structured than an array, you have to look elsewhere.</p>
<div class="read-more"></div>

<p>This is where <a href="http://browsenpm.org/package/yargs">yargs</a> (Github: <a href="https://github.com/chevex/yargs">chevex/yargs</a>, License: MIT) comes in handy. This module was originally written by <a href="https://github.com/substack">James Halliday</a> and called <a href="https://github.com/substack/node-optimist">optimist</a>. It is now called <a href="http://browsenpm.org/package/yargs">yargs</a> and the work is continued by <a href="https://github.com/chevex">Alex Ford</a>. Lets get it installed:</p>
<pre><code>npm install yargs
</code></pre><h2 id="features">Features</h2>
<p><a href="http://browsenpm.org/package/yargs">yargs</a> covers most of the features you would need to parse out options from command line.</p>
<ul>
<li>Named options: <code>--foo=1 --bar=2</code>, <code>--foo 1 --bar 2</code> or even <code>-foo 1 -bar 2</code></li>
<li>Groupped options tarball style: <code>-x</code>, <code>-xz</code>, <code>-xzvf</code></li>
<li>Count options: <code>-v</code>, <code>-vv</code>, <code>-vvv</code></li>
<li>Non-hyphenated options.</li>
<li>Usage / requirements.</li>
<li>Defaults.</li>
<li>Typing (boolean, string, etc).</li>
</ul>
<p>Lets look at each one:</p>
<h3 id="named-options">Named options</h3>
<p>named-options.js</p>
<pre><code>#!/usr/bin/env node
var argv = require(&#39;yargs&#39;).argv;

if (argv.a &gt; argv.b) {
  console.log(&#39;a seems bigger than b&#39;);
} else {
  console.log(&#39;a is not bigger than b&#39;);
}
</code></pre><hr>
<pre><code>$ ./named-options.js --a=55 --b=9.52
a seems bigger than b

$ ./named-options.js --a 1 --b 8.1
a is not bigger than b
</code></pre><h3 id="groupped-options-tarball-style">Groupped Options <code>tarball</code> Style</h3>
<p>tar.js</p>
<pre><code>#!/usr/bin/env node
var argv = require(&#39;yargs&#39;).argv;

if (argv.x) console.log(&#39;Will extract to disk from the archive&#39;);
if (argv.z) console.log(&#39;Will compress the resulting archive with gzip&#39;);
if (argv.f) console.log(&#39;Will read the archive from the archive file&#39;);
</code></pre><hr>
<pre><code>$ ./tar.js -z
Will compress the resulting archive with gzip

$ ./tar.js -zf
Will compress the resulting archive with gzip
Will read the archive from the archive file

$ ./tar.js -zfx
Will extract to disk from the archive
Will compress the resulting archive with gzip
Will read the archive from the archive file
</code></pre><h3 id="count-options">Count Options</h3>
<p>count.js</p>
<pre><code>#!/usr/bin/env node
var argv = require(&#39;yargs&#39;)
    .count(&#39;verbose&#39;)
    .alias(&#39;v&#39;, &#39;verbose&#39;)
    .argv;

VERBOSE_LEVEL = argv.verbose;

function WARN()  { VERBOSE_LEVEL &gt;= 0 &amp;&amp; console.log.apply(console, arguments); }
function INFO()  { VERBOSE_LEVEL &gt;= 1 &amp;&amp; console.log.apply(console, arguments); }
function DEBUG() { VERBOSE_LEVEL &gt;= 2 &amp;&amp; console.log.apply(console, arguments); }

WARN(&quot;Showing only important stuff&quot;);
INFO(&quot;Showing semi-mportant stuff too&quot;);
DEBUG(&quot;Extra chatty mode&quot;);
</code></pre><hr>
<pre><code>$ ./count.js
Showing only important stuff

$ ./count.js -v
Showing only important stuff
Showing semi-important stuff too

$ ./count.js -vv
Showing only important stuff
Showing semi-important stuff too
Extra chatty mode

$ ./count.js -v --verbose
Showing only important stuff
Showing semi-important stuff too
Extra chatty mode
</code></pre><h3 id="non-hyphenated-options">Non-hyphenated Options</h3>
<p>nonopt.js:</p>
<pre><code>#!/usr/bin/env node
var argv = require(&#39;yargs&#39;).argv;

console.log(&#39;(%d,%d)&#39;, argv.x, argv.y);
console.log(argv._);
</code></pre><hr>
<pre><code>$ ./nonopt.js -x 6.82 -y 3.35 rum
(6.82,3.35)
[ &#39;rum&#39; ]

$ ./nonopt.js &quot;me hearties&quot; -x 0.54 yo -y 1.12 ho
(0.54,1.12)
[ &#39;me hearties&#39;, &#39;yo&#39;, &#39;ho&#39; ]
</code></pre><h3 id="usage-requirements">Usage / Requirements</h3>
<p>divide.js:</p>
<pre><code>#!/usr/bin/env node
var argv = require(&#39;yargs&#39;)
  .usage(&#39;Usage: $0 -x [num] -y [num]&#39;)
  .demand([&#39;x&#39;,&#39;y&#39;])
  .argv;

console.log(argv.x / argv.y);
</code></pre><hr>
<pre><code>$ ./divide.js -x 55 -y 11
5

$ ./divide.js -x 4.91 -z 2.51
Usage: node ./divide.js -x [num] -y [num]

Options:
  -x  [required]
  -y  [required]

Missing required arguments: y
</code></pre><p>demand_count.js:</p>
<pre><code>#!/usr/bin/env node
var argv = require(&#39;yargs&#39;)
  .demand(2)
  .argv;

console.dir(argv)
</code></pre><hr>
<pre><code>$ ./demand_count.js a
Not enough arguments, expected 2, but only found 1

$ ./demand_count.js a b
{ _: [ &#39;a&#39;, &#39;b&#39; ], &#39;$0&#39;: &#39;./demand_count.js&#39; }

$ ./demand_count.js a b c
{ _: [ &#39;a&#39;, &#39;b&#39;, &#39;c&#39; ], &#39;$0&#39;: &#39;./demand_count.js&#39; }
</code></pre><h3 id="defaults">Defaults</h3>
<p>default_singles.js:</p>
<pre><code>#!/usr/bin/env node
var argv = require(&#39;yargs&#39;)
  .default(&#39;x&#39;, 10)
  .default(&#39;y&#39;, 10)
  .argv;

console.log(argv.x + argv.y);
</code></pre><hr>
<pre><code>$ ./default_singles.js -x 5
15
</code></pre><p>default_hash.js:</p>
<pre><code>#!/usr/bin/env node
var argv = require(&#39;yargs&#39;)
  .default({ x : 10, y : 10 })
  .argv;

console.log(argv.x + argv.y);
</code></pre><hr>
<pre><code>$ ./default_hash.js -y 7
17
</code></pre><h3 id="typing-boolean-string-etc-">Typing (boolean, string, etc)</h3>
<p>boolean_single.js</p>
<pre><code>#!/usr/bin/env node
var argv = require(&#39;yargs&#39;)
  .boolean(&#39;v&#39;)
  .argv;

console.dir(argv.v);
console.dir(argv._);
</code></pre><hr>
<pre><code>$ ./boolean_single.js -v &quot;me hearties&quot; yo ho
true
[ &#39;me hearties&#39;, &#39;yo&#39;, &#39;ho&#39; ]
</code></pre><p>boolean_double.js</p>
<pre><code>#!/usr/bin/env node
var argv = require(&#39;yargs&#39;)
  .boolean([&#39;x&#39;,&#39;y&#39;,&#39;z&#39;])
  .argv;

console.dir([ argv.x, argv.y, argv.z ]);
console.dir(argv._);
</code></pre><hr>
<pre><code>$ ./boolean_double.js -x -z one two three
[ true, false, true ]
[ &#39;one&#39;, &#39;two&#39;, &#39;three&#39; ]
</code></pre><h2 id="putting-it-all-together">Putting it all together</h2>
<p>Finally, all together this makes a fully functional options parser.</p>
<pre><code>#!/usr/bin/env node
var argv = require(&#39;yargs&#39;)
  .usage(&#39;Count the lines in a file.\nUsage: $0&#39;)
  .example(&#39;$0 -f&#39;, &#39;count the lines in the given file&#39;)
  .demand(&#39;f&#39;)
  .alias(&#39;f&#39;, &#39;file&#39;)
  .describe(&#39;f&#39;, &#39;Load a file&#39;)
  .argv;
</code></pre><h2 id="other-modules-to-checkout">Other modules to checkout</h2>
<p>There are many other modules that can help you figure out CLI arguments, some do more, others do less.</p>
<ul>
<li>by James Halliday aka substack is a light weight module without or usage functionality. James has moved on from <a href="https://github.com/substack/node-optimist">optimist</a> to [minimist][github] probably around the time when community started adopting mantra of smaller modules that do one thing well. It&#39;s a personal preference and I&#39;m glad there are options.</li>
<li>by Chris O&#39;Hara is a swiss army knife module for writing CLI applications.</li>
</ul>
<h2 id="closing-thoughts">Closing thoughts</h2>
<p>I&#39;ve been using <a href="https://github.com/substack/node-optimist">optimist</a> for over a year now and is saddened to see James giving it up, but at the same time it&#39;s exciting that the idea and implementation lives on in <a href="http://browsenpm.org/package/yargs">yargs</a>. A problem that seems so simple on the surface, such as collecting arguments, can turn out to be a major headache without proper tools. I&#39;m very glad <a href="http://browsenpm.org/package/yargs">yargs</a> is here to help us deal with it.</p>
<div class="social-box"><div data-yashareLink="http://npmawesome.com/posts/2014-03-21-yargs" data-yashareL10n="en" data-yashareQuickServices="facebook,twitter,gplus" data-yashareTheme="counter" data-yasharetype-off="small" class="yashare-auto-init"></div></div></div></article><div id="disqus_thread"></div><script type="text/javascript">/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'npmawesome'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script></div><aside class="col"><div class="feedburner"><a href="http://feeds.feedburner.com/npmawesome"><img src="/images/feed.gif"></a></div><div class="other-posts"><h4>Previously...</h4><div><a href="/posts/2014-06-26-songbird" class="partner nodejitsu">songbird</a></div><div><a href="/posts/2014-06-24-comparing-winston-and-bunyan-node-js-logging" class="partner strongloop">Comparing Winston and Bunyan Node.js Logging</a></div><div><a href="/posts/2014-06-17-links">Links for June 17, 2014</a></div><div><a href="/posts/2014-06-16-jugglingdb" class="partner nodejitsu">JugglingDB</a></div><div><a href="/posts/2014-06-06-links">Links for June 6, 2014</a></div><div><a href="/posts/2014-05-29-links">Links for May 29, 2014</a></div><div><a href="/posts/2014-05-23-joi" class="partner nodejitsu">joi</a></div><div><a href="/posts/2014-05-23-changelog">changelog</a></div><div><a href="/posts/2014-05-22-links">Links for May 22, 2014</a></div><div><a href="/posts/2014-05-20-links">Links for May 20, 2014</a></div><div><a href="/posts/2014-05-16-longjohn" class="partner nodejitsu">longjohn</a></div><div><a href="/posts/2014-05-16-links">Links for May 16, 2014</a></div><div><a href="/posts/2014-05-14-links">Links for May 14, 2014</a></div><div><a href="/posts/2014-05-13-links">Links for May 13, 2014</a></div><div><a href="/posts/2014-05-06-agenda" class="partner nodejitsu">agenda</a></div><div><a href="/posts/2014-05-06-links">Links for May 6, 2014</a></div><div><a href="/posts/2014-05-01-google-distance">google-distance</a></div><div><a href="/posts/2014-04-30-links">Links for Apr 30, 2014</a></div><div><a href="/posts/2014-04-30-sentiment" class="partner nodejitsu">sentiment</a></div><div><a href="/posts/2014-04-29-compare-express-restify-hapi-loopback" class="partner strongloop">Comparing Express, Restify, hapi and LoopBack for building RESTful APIs</a></div><div><a href="/posts/2014-04-28-angular-injector">angular-injector</a></div><div><a href="/posts/2014-04-23-platform-js">platform.js</a></div><div><a href="/posts/2014-04-23-links">Links for Apr 23, 2014</a></div><div><a href="/posts/2014-04-19-links">Links for Apr 19, 2014</a></div><div><a href="/posts/2014-04-18-links">Links for Apr 18, 2014</a></div><div><a href="/posts/2014-04-18-terminal-menu" class="partner nodejitsu">terminal-menu</a></div><div><a href="/posts/2014-04-17-links">Links for Apr 17, 2014</a></div><div><a href="/posts/2014-04-16-promises-trycatch-zones" class="partner strongloop">Comparing Node.js Promises, Try/Catch, Angular Zone.js and yes, Zone</a></div><div><a href="/posts/2014-04-15-links">Links for Apr 15, 2014</a></div><div><a href="/posts/2014-04-11-links">Links for Apr 10, 2014</a></div><div><a href="/posts/2014-04-10-shmock">shmock</a></div><div><a href="/posts/2014-04-09-links">Links for Apr 8, 2014</a></div><div><a href="/posts/2014-04-07-links">Links for Apr 7, 2014</a></div><div><a href="/posts/2014-04-04-links">Links for Apr 5, 2014</a></div><div><a href="/posts/2014-04-04-progress" class="partner nodejitsu">progress</a></div><div><a href="/posts/2014-04-04-slate-irc">slate-irc</a></div><div><a href="/posts/2014-04-03-links">Links for Apr 4, 2014</a></div><div><a href="/posts/2014-03-28-cli-table" class="partner nodejitsu">cli-table</a></div><div><a href="/posts/2014-03-21-yargs" class="current partner nodejitsu">yargs</a></div><div><a href="/posts/2014-03-12-convict" class="partner nodejitsu">convict</a></div><div><a href="/posts/2014-03-06-lockit" class="partner nodejitsu">lockit</a></div><div><a href="/posts/2014-02-27-qr-image" class="partner nodejitsu">qr-image</a></div><div><a href="/posts/2014-02-25-webdriverjs">webdriverjs</a></div><div><a href="/posts/2014-02-24-pretty-error">pretty-error</a></div><div><a href="/posts/2014-02-21-supertest">supertest</a></div><div><a href="/posts/2014-02-20-spritesmith">spritesmith</a></div><div><a href="/posts/2014-02-19-9-gulp-js-plugins-for-a-great-build-system" class="partner nodejitsu">9 gulp.js plugins for a great build system</a></div><div><a href="/posts/2014-02-18-npm-diff">npm-diff</a></div><div><a href="/posts/2014-02-17-nodepdf">nodepdf</a></div><div><a href="/posts/2014-02-13-domain-context">domain-context</a></div><div><a href="/posts/2014-02-12-jsonstream">jsonstream</a></div><div><a href="/posts/2014-02-11-peer-js">peerjs</a></div><div><a href="/posts/2014-02-10-node-dependencies">node-dependencies</a></div><div><a href="/posts/2014-02-05-cucumber-js">cucumber</a></div><div><a href="/posts/2014-02-04-binary-js">binaryjs</a></div><div><a href="/posts/2014-02-03-power-assert">power-assert</a></div><div><a href="/posts/2014-01-31-coupon-code">coupon-code</a></div><div><a href="/posts/2014-01-30-rewire">rewire</a></div><div><a href="/posts/2014-01-29-yarm">yarm</a></div><div><a href="/posts/2014-01-28-modella">modella</a></div><div><a href="/posts/2014-01-27-mversion">mversion</a></div><div><a href="/posts/2014-01-24-schema-inspector">schema-inspector</a></div><div><a href="/posts/2014-01-23-oboe-js">oboe</a></div><div><a href="/posts/2014-01-22-autoprefixer">autoprefixer</a></div><div><a href="/posts/2014-01-21-js-yaml">js-yaml</a></div><div><a href="/posts/2014-01-17-gaze">gaze</a></div><div><a href="/posts/2014-01-14-shortid">shortId</a></div><div><a href="/posts/2014-01-13-testium">testium</a></div><div><a href="/posts/2014-01-10-messageformat">messageformat</a></div><div><a href="/posts/2014-01-09-gulp">gulp</a></div><div><a href="/posts/2014-01-06-chalk">chalk</a></div><div><a href="/posts/2013-12-31-recluster">recluster</a></div><div><a href="/posts/2013-12-30-rework">rework</a></div><div><a href="/posts/2013-12-27-cheerio">cheerio</a></div><div><a href="/posts/2013-12-19-dat">dat</a></div><div><a href="/posts/2013-12-18-xregexp">xregexp</a></div><div><a href="/posts/2013-12-17-npm">npm v1.3.18</a></div><div><a href="/posts/2013-12-16-ect">ect</a></div><div><a href="/posts/2013-12-13-chrono">chrono-node</a></div><div><a href="/posts/2013-12-11-prettyjson">prettyjson</a></div><div><a href="/posts/2013-12-10-state">state</a></div><div><a href="/posts/2013-12-09-blessed">blessed</a></div><div><a href="/posts/2013-12-05-gm">gm</a></div><div><a href="/posts/2013-12-03-nak">nak</a></div><div><a href="/posts/2013-12-03-verymodel">verymodel</a></div><div><a href="/posts/2013-11-30-scala-js">scala.js</a></div><div><a href="/posts/2013-11-27-scale-npm">scalenpm.org</a></div><div><a href="/posts/2013-11-26-rx-js">rx</a></div><div><a href="/posts/2013-11-26-docpad">docpad</a></div><div><a href="/posts/2013-11-25-grunt-angular-builder">grunt-angular-builder</a></div><div><a href="/posts/2013-11-22-videoconverter-js">videoconverter.js</a></div><div><a href="/posts/2013-11-22-event-stream">event-stream</a></div><div><a href="/posts/2013-11-21-bacon-js">baconjs</a></div><div><a href="/posts/2013-11-20-spdy">spdy</a></div><div><a href="/posts/2013-11-19-json-mask">json-mask</a></div><div><a href="/posts/2013-11-18-pm2">pm2</a></div><div><a href="/posts/2013-11-18-npmd">npmd</a></div><div><a href="/posts/2013-11-18-nixt">nixt</a></div><div><a href="/posts/2013-11-17-vm-js">vm.js</a></div><div><a href="/posts/2013-11-17-node-jvm">node-jvm</a></div><div><a href="/posts/2013-11-17-flake">flake</a></div></div></aside></div></div><a id="fork-me" href="https://github.com/alexgorbatchev/npm-awesome-site" class="hide-on-mobile">Fork Me</a><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

// http://drawingablank.me/blog/fix-your-bounce-rate.html
// https://news.ycombinator.com/item?id=5766883
setTimeout(function() { ga('send', 'event', 'read', 'auto generated'); }, 5000);

ga('create', 'UA-46164085-1', 'npmawesome.com');
ga('send', 'pageview');
</script><script>/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'npmawesome'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
  var s = document.createElement('script'); s.async = true;
  s.type = 'text/javascript';
  s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script><script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><script async src="/scripts/npmawesome.min.js"></script><script async src="//platform.twitter.com/widgets.js"></script><script async src="//yandex.st/share/share.js"></script></body>